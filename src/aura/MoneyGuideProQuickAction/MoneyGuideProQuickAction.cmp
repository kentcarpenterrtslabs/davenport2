<!--
 - Created by Eric Stansbury on 4/29/2019.
 -->

<aura:component description="MoneyGuideProQuickAction" implements="force:lightningQuickAction,force:hasRecordId" controller="MoneyGuideProRequestController">
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"/>
    <aura:attribute name="recordId" type="String" />
    <aura:attribute name="request" type="String" description="The request being submitted to MoneyGuidePro" />
    <aura:attribute name="requestDisplay" type="String" description="The request being submitted to MoneyGuidePro, with line breaks added for readability" />
    <aura:attribute name="response" type="Object" description="Response from MoneyGuidePro after a request is submitted" />
	<aura:attribute name="loginAsOptions" type="List" default="[]" />
    <div class="request">{!v.requestDisplay}</div>

    <aura:if isTrue="{!v.response == null}">
        <div class="slds-grid_vertical">
            <div class="slds-col">
				<lightning:messages aura:id="errorMessage" />
            </div>
            <div class="slds-col slds-p-top--medium">
				<lightning:combobox aura:id="loginAsCmbx" name="loginAsCmbx" label="Login as:" options="{! v.loginAsOptions }" />
            </div>
            <div class="slds-col slds-p-top--medium">
                <button class="slds-button slds-button--brand slds-float--right" onclick="{!c.submit}">Open MoneyGuidePro</button>
            </div>
        </div>
    </aura:if>

    <aura:if isTrue="{!v.response != null}">
        <div class="response-submitted slds-text-color_success">Household submitted.</div>
        <div class="response-detail">{!v.response}</div>
    </aura:if>
</aura:component>